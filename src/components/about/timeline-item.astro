---
import type { ImageMetadata } from "astro";
import { Image } from "astro:assets";

export type TimelineItemType = {
  title: string;
  date: string;
  image: ImageMetadata;
};

type Props = TimelineItemType;
const { title, date, image } = Astro.props as Props;
---

<div
  class="group relative flex flex-col bg-white py-12 md:flex-row-reverse even:md:flex-row"
>
  {/* Horizontal line spanning 70% of width, positioned 15% from left */}
  <div
    class="absolute bottom-0 left-[calc(15%+5px)] h-[1px] w-[calc(70%-10px)] bg-neutral-dark-10 group-last:hidden"
  >
  </div>

  {
    /* Vertical line positioned either 15% from left or right depending on odd/even */
  }
  <div
    class="absolute bottom-0 top-[5px] z-10 h-[calc(100%-10px)] w-[1px] rounded-full bg-neutral-dark-10 group-odd:right-[15%] group-even:left-[15%]"
  >
  </div>

  {/* Right corner piece - rotates -90deg on even items */}
  <div
    class="absolute bottom-0 right-[calc(15%)] z-10 h-[10px] w-[10px] rounded-br-md border-b border-r border-neutral-dark-10 group-last:hidden group-even:-bottom-[9px] group-even:-rotate-90"
  >
  </div>

  {/* Left corner piece - rotates 90deg on odd items */}
  <div
    class="absolute bottom-0 left-[calc(15%)] z-10 h-[10px] w-[10px] rounded-bl-md border-b border-l border-neutral-dark-10 group-last:hidden group-odd:-bottom-[9px] group-odd:rotate-90"
  >
  </div>
  <div class="z-20 flex w-1/2 items-center justify-center">
    <Image
      class="mx-auto overflow-hidden rounded-t-[4px]"
      src={image}
      loading="lazy"
      alt="DevC Casa illustration"
    />
  </div>

  <div class="w-1/2 p-8">
    <div class="flex items-start justify-between">
      <h2 class="text-heading-sm text-neutral-dark-30">{title}</h2>
      <p class="text-label-xs whitespace-nowrap">{date}</p>
    </div>
    <div>
      <slot />
    </div>
  </div>
</div>
